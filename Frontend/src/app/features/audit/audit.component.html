<section class="feature-center">
  <div class="feature-card">
    <h2>Auditoría de Acciones</h2>

    <div *ngIf="error" class="error">{{ error }}</div>

    <div *ngIf="loading" class="skeleton-list"><div class="skeleton-row" *ngFor="let _ of [1,2,3,4]"></div></div>

    <div class="table-scroll" *ngIf="!loading && logs.length">
      <table class="table audit-table">
        <thead>
          <tr>
            <th class="col-date">Fecha</th>
            <th class="col-actor">Actor</th>
            <th class="col-action">Acción</th>
            <th class="col-detail">Detalle</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let log of logs">
            <td class="col-date">{{ log.created_at | date:'medium' }}</td>
            <td class="col-actor">{{ log.actor_username || 'system' }}</td>
            <td class="col-action">{{ readableAction(log) }}</td>
            <td class="col-detail">
              <dl>
                <ng-container *ngFor="let item of describe(log)">
                  <dt>{{ item.label }}</dt>
                  <dd>{{ item.value }}</dd>
                </ng-container>
              </dl>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <p class="muted" *ngIf="!loading && !logs.length">Sin eventos aún.</p>
  </div>
</section>
